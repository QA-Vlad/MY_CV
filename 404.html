<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>CV Vladlen Kuznetsov - Redirecting...</title>
    <script type="text/javascript">
      const segmentCount = 0;
      const l = window.location;
      const homePathSegments = l.pathname.split('/').slice(0, 1 + segmentCount);
      let homePath = homePathSegments.join('/');
      if (homePathSegments.length > 1 && !homePath.endsWith('/')) {
          homePath += '/';
      } else if (homePathSegments.length === 1 && homePath === '') {
          homePath = '/';
      }

      const fullPath = l.pathname;
      const basePathForSlice = l.pathname.split('/').slice(0, 1 + segmentCount).join('/');

      let spaRedirectPath = '';
      if (fullPath.length > basePathForSlice.length) {
        // Убираем начальный слеш, если он есть после basePathForSlice, и сохраняем конечный, если он был
        spaRedirectPath = fullPath.substring(basePathForSlice.length);
        if (spaRedirectPath.startsWith('/')) {
            spaRedirectPath = spaRedirectPath.substring(1);
        }
      }

      let redirectUrl = homePath;

      if (spaRedirectPath) {
        redirectUrl += '?spa_path=' + encodeURIComponent(spaRedirectPath);
        redirectUrl += l.search; // Добавляем оригинальные search параметры ПОСЛЕ ?spa_path= (если spa_path есть)
                                 // Если search уже есть, encodeURIComponent(spaRedirectPath) будет первым параметром.
                                 // Если search нет, будет ?spa_path=...
      } else {
        redirectUrl += l.search; // Если нет spa_path, просто добавляем оригинальный search
      }
      redirectUrl += l.hash;

      l.replace(redirectUrl);
    </script>
  </head>
  <body>
    If you are not redirected automatically, please <a id="redirect-link" href="/MY_CV/">click here</a>.
    <script type="text/javascript">
      const lForLink = window.location;
      const homePathForLinkSegments = lForLink.pathname.split('/').slice(0, 1 + 1);
      let homePathForLink = homePathForLinkSegments.join('/');
      if (homePathForLinkSegments.length > 1 && !homePathForLink.endsWith('/')) {
          homePathForLink += '/';
      } else if (homePathForLinkSegments.length === 1 && homePathForLink === '') {
          homePathForLink = '/';
      }
      document.getElementById('redirect-link').href = homePathForLink;
    </script>
  </body>
</html>